<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
    <channel>
        <title>Posts on Ryuichiro Suzuki</title>
        <link>https://effulgent-belekoy-b37d9e.netlify.app/posts/</link>
        <description>Recent content in Posts on Ryuichiro Suzuki</description>
        <generator>Hugo -- gohugo.io</generator>
        <language>en-us</language>
        <lastBuildDate>Sun, 18 Sep 2022 15:41:36 +0900</lastBuildDate>
        <atom:link href="https://effulgent-belekoy-b37d9e.netlify.app/posts/index.xml" rel="self" type="application/rss+xml" />
        
        <item>
            <title>Alpine Ruby Nokogiri Issue</title>
            <link>https://effulgent-belekoy-b37d9e.netlify.app/posts/alpine-ruby-nokogiri-issue/</link>
            <pubDate>Sun, 18 Sep 2022 15:41:36 +0900</pubDate>
            
            <guid>https://effulgent-belekoy-b37d9e.netlify.app/posts/alpine-ruby-nokogiri-issue/</guid>
            <description>The issue I was doing practice of Github workflow by making a basic task app using Rails
I was using
ruby:3.1.2-alpine3.14 (for the base image) Rails 7.0.4 Initially, everything was going smoothly but once I shut down the computer one day and came to work on it again, I started getting error from Nokogiri every time I try to bundle install in the container.
Gem::Ext::BuildError: ERROR: Failed to build gem native extension.</description>
            <content type="html"><![CDATA[<h1 id="the-issue">The issue</h1>
<p>I was doing practice of Github workflow by making a basic task app using Rails</p>
<p>I was using</p>
<ul>
<li>ruby:3.1.2-alpine3.14 (for the base image)</li>
<li>Rails 7.0.4</li>
</ul>
<p>Initially, everything was going smoothly but once I shut down the computer one day and came to work on it again, I started getting error from Nokogiri every time I try to <code>bundle install</code> in the container.</p>
<pre tabindex="0"><code>Gem::Ext::BuildError: ERROR: Failed to build gem native extension.
</code></pre><p>I&rsquo;ve tried a few things but the one solved the problem was adding</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-dockerfile" data-lang="dockerfile"><span style="display:flex;"><span><span style="color:#66d9ef">RUN</span> apk add --no-cache libc6-compat <span style="color:#f92672">&amp;&amp;</span> ln -s /lib/libc.musl-x86_64.so.1 /lib/ld-linux-x86-64.so.2<span style="color:#960050;background-color:#1e0010">
</span></span></span></code></pre></div><p>to the Dockerfile that builds the image for ruby.</p>
<p>I came to this idea in through the following steps</p>
<p>I started the container and in the shell, I simply ran</p>
<pre tabindex="0"><code class="language-ash" data-lang="ash">gem install nokogiri
</code></pre><p>which worked</p>
<p>Then, in <code>irb</code>, I tried to require <code>nokogiri</code>.
Which threw an error like</p>
<pre tabindex="0"><code>Error loading shared library ld-linux-x86-64.so.2: No such file or directory
</code></pre><p>When I googled, I hit on this (Qiita article)[https://qiita.com/hiko1129/items/5f1914d01b7ee3713b62], which said to run the command above.</p>
<p>It seems that it is based off of the (stackoverflow article)[https://stackoverflow.com/questions/50288034/unsatisfiedlinkerror-tmp-snappy-1-1-4-libsnappyjava-so-error-loading-shared-li] but tbh, I have no idea why it did the fix.</p>
<p>I&rsquo;m just noting here so that someone who might have a similar problem can fix it. Or, future me might benefit from it once I remake the Dockerfile for another practice run ðŸ˜…</p>
]]></content>
        </item>
        
    </channel>
</rss>
